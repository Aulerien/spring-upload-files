<!DOCTYPE html>
<html lang="en"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:th="http://www.w3.org/1999/xhtml"
>

<head>
    <meta charset="UTF-8">
    <title>Upload files & Display</title>
    <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
</head>
<body>

<div class="container mt-4">

    <h2>Bonjour : <span th:text="${bonjourText}"></span></h2>

    <!-- form to save -->
    <div class="card mt-3">
        <div class="card-title bg-primary text-center">
            <h3>Enregistrement d'une personne</h3>
        </div>
        <div class="card-body">

            <form th:object="${personForm}" th:action="${'/persons/save'}" method="post" enctype="multipart/form-data">
                <div class="row gy-3">
                    <div class="form-group col-6">
                        <label for="nom">Nom</label>
                        <input th:field="${personForm.nom}" id="nom" type="text" class="form-control" name="nom">
                    </div>
                    <div class="form-group col-6">
                        <label for="prenoms">Prénom(s)</label>
                        <input th:field="${personForm.prenoms}" id="prenoms" type="text" class="form-control" name="prenoms">
                    </div>
                    <div class="form-group col-12">
                        <label for="image">Image de la personne</label>
                        <input th:field="${personForm.image}" id="image" type="file" class="form-control">
                    </div>

                    <div class="form-group col-12 d-flex justify-content-center">
                        <input type="submit" class="btn btn-success" value="Enregistrer">
                    </div>
                </div>
            </form>

        </div>
    </div>
    <!-- list data -->
    <div class="card mt-2">
        <div class="card-title bg-primary text-center">
            <h3>Liste des personnes</h3>
        </div>
        <div class="card-body">

           <table class="table table-striped">
               <thead>
               <tr>
                   <td class="col">Nom</td>
                   <td class="col">Prénom(s)</td>
                   <td class="col">Image</td>
               </tr>
               </thead>

               <tbody>

               <tr th:each="person : ${persons}">
                   <td>
                       <span th:text="${person.nom}"></span>
                   </td>
                   <td>
                       <span th:text="${person.prenoms}"></span>
                   </td>
                   <td>
                       <img class="img-fluid" th:src="${'/images/persons/'+person.imageName}" th:alt="${'Image de ' + person.nom + ' ' + person.prenoms}">
                   </td>
               </tr>

               </tbody>
           </table>

        </div>
    </div>
</div>

</body>
</html>